<!doctype html>
<html lang="zh-cn">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>6.828 Homework 2:Shell | LeeReindeer&#39;s blog</title>
    <meta property="og:title" content="6.828 Homework 2:Shell - LeeReindeer&#39;s blog">
    <meta property="og:type" content="article">
    
    <meta property="article:published_time" content='2018-09-29T16:31:21&#43;08:00'>
    
    
    <meta property="article:modified_time" content='2018-09-29T16:31:21&#43;08:00'>
    
    <meta name="Keywords" content="">
    <meta name="description"
        content="è¿™æ¬¡çš„ä½œä¸šæ˜¯å®ç°ä¸€ä¸ªç®€å•çš„ shellã€‚é€šè¿‡é˜…è¯» xv6 book çš„ç¬¬é›¶ç« ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥å®ç°é¢˜ç›®ä¸­æ‰€è¯´çš„ä¸‰ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæ˜¯shellçš„åŸºæœ¬åŠŸèƒ½ï¼šè¿è¡Œç®€å•çš„å‘½ä»¤ï¼Œè¾“å…¥è¾“å‡ºé‡å®šå‘ï¼Œç®¡é“ã€‚
é¢˜ç›®æä¾›çš„sh.cå·²ç»å®ç°äº†å‘½ä»¤çš„è§£æï¼ˆå¤§æ¦‚çœ‹äº†ä¸€ä¸‹æµç¨‹ï¼Œå¤§æ¦‚å°±æ˜¯ä¸ªé€’å½’ä¸‹é™è§£é‡Šå™¨å§ï¼Œè¿™æ¬¡ä½œä¸šæ— éœ€å…³å¿ƒè¿™ä¸ªï¼‰ï¼Œåªéœ€è¦å®Œæˆruncmdå‡½æ•°ä¸­ç¼ºå°‘çš„ä»£ç å³å¯ã€‚
æµç¨‹
å…ˆä» main å‡½æ•°çœ‹èµ·ï¼š
int main(void) {
  static char buf[100];
  int fd, r;

  // Read and run input commands.
  while (getcmd(buf, sizeof(buf)) &gt;= 0) {
    if (buf[0] == &#39;c&#39; &amp;&amp; buf[1] == &#39;d&#39; &amp;&amp; buf[2] == &#39; &#39;) {
      // Clumsy but will have to do for now.
      // Chdir has no effect on the parent if run in the child.
      buf[strlen(buf) - 1] = 0; // chop \n
      if (chdir(buf &#43; 3) &lt; 0)
        fprintf(stderr, &#34;cannot cd %s\n&#34;, buf &#43; 3);
      continue;
    }
    if (fork1() == 0)
      runcmd(parsecmd(buf));
    wait(&amp;r);
  }
  exit(0);
}
main å‡½æ•°å¾ªç¯è°ƒç”¨ getcmdä» console è¯»å–å‘½ä»¤ï¼Œå¯¹ cd å‘½ä»¤åšäº†ç‰¹åˆ«å¤„ç†ã€‚ä¹‹åforkåˆ›å»ºå­è¿›ç¨‹ï¼Œè°ƒç”¨parsecmdè§£æå‘½ä»¤ï¼Œå†è°ƒç”¨runcmdæ‰§è¡Œå¾—åˆ°çš„å‘½ä»¤ã€‚æœ€åè°ƒç”¨waitç­‰å¾…å­è¿›ç¨‹ç»“æŸã€‚main çš„åŸºæœ¬æµç¨‹å°±è¿™æ ·ã€‚">
    
    <meta name="author" content="LeeR">
    <meta property="og:url" content="https://leer.moe/post/6.828_hw2_shell/">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    <link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
    

    
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://leer.moe/">
                        LeeReindeer&#39;s blog
                    </a>
                
                <p class="description">Dive in</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://leer.moe/">é¦–é¡µ</a>
                    
                    <a  href="https://leer.moe/archives/" title="å½’æ¡£">å½’æ¡£</a>
                    
                    <a  href="https://leer.moe/about/" title="å…³äº">å…³äº</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 260px;
        margin-top: 1%;
        right: 8.5%;
         
        margin-right: 1%;
        padding: 5px 10px;
        font-size: 12px;
         
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
         
         
         
        word-wrap: break-word;
        line-height: 1.5;
         
         
         
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 18px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
        color: #ba3925;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">6.828 Homework 2:Shell</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ol>
    <li><a href="#æµç¨‹">æµç¨‹</a></li>
    <li><a href="#system-interface">System interface</a></li>
    <li><a href="#è¿è¡ŒåŸºæœ¬çš„å‘½ä»¤">è¿è¡ŒåŸºæœ¬çš„å‘½ä»¤</a>
      <ol>
        <li><a href="#æ”¹è¿›">æ”¹è¿›</a></li>
      </ol>
    </li>
    <li><a href="#io-redirection">I/O Redirection</a></li>
    <li><a href="#pipe">Pipe</a></li>
  </ol>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            
            
            
            

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">6.828 Homework 2:Shell</h1>
        </header>
        <date class="post-meta meta-date">
            2018å¹´9æœˆ29æ—¥
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='https://leer.moe/categories/%E8%87%AA%E4%B9%A0%E5%AE%A4'>è‡ªä¹ å®¤</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span>|</span>
            <span class="meta-category">2325 words</span>
        </div>
        
        
        
        <div class="post-content">
            <p>è¿™æ¬¡çš„ä½œä¸šæ˜¯å®ç°ä¸€ä¸ªç®€å•çš„ shellã€‚é€šè¿‡é˜…è¯» <a href="https://pdos.csail.mit.edu/6.828/2018/xv6/book-rev11.pdf">xv6 book</a> çš„ç¬¬é›¶ç« ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥å®ç°é¢˜ç›®ä¸­æ‰€è¯´çš„ä¸‰ä¸ªåŠŸèƒ½ï¼Œä¹Ÿæ˜¯shellçš„åŸºæœ¬åŠŸèƒ½ï¼šè¿è¡Œç®€å•çš„å‘½ä»¤ï¼Œè¾“å…¥è¾“å‡ºé‡å®šå‘ï¼Œç®¡é“ã€‚</p>
<p>é¢˜ç›®æä¾›çš„<code>sh.c</code>å·²ç»å®ç°äº†å‘½ä»¤çš„è§£æï¼ˆå¤§æ¦‚çœ‹äº†ä¸€ä¸‹æµç¨‹ï¼Œå¤§æ¦‚å°±æ˜¯ä¸ªé€’å½’ä¸‹é™è§£é‡Šå™¨å§ï¼Œè¿™æ¬¡ä½œä¸šæ— éœ€å…³å¿ƒè¿™ä¸ªï¼‰ï¼Œåªéœ€è¦å®Œæˆ<code>runcmd</code>å‡½æ•°ä¸­ç¼ºå°‘çš„ä»£ç å³å¯ã€‚</p>
<h2 id="æµç¨‹">æµç¨‹</h2>
<p>å…ˆä» <code>main</code> å‡½æ•°çœ‹èµ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">main</span>(<span style="color:#458;font-weight:bold">void</span>) {
  <span style="color:#000;font-weight:bold">static</span> <span style="color:#458;font-weight:bold">char</span> buf[<span style="color:#099">100</span>];
  <span style="color:#458;font-weight:bold">int</span> fd, r;

  <span style="color:#998;font-style:italic">// Read and run input commands.
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">while</span> (getcmd(buf, <span style="color:#000;font-weight:bold">sizeof</span>(buf)) <span style="color:#000;font-weight:bold">&gt;=</span> <span style="color:#099">0</span>) {
    <span style="color:#000;font-weight:bold">if</span> (buf[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;c&#39;</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> buf[<span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;d&#39;</span> <span style="color:#000;font-weight:bold">&amp;&amp;</span> buf[<span style="color:#099">2</span>] <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39; &#39;</span>) {
      <span style="color:#998;font-style:italic">// Clumsy but will have to do for now.
</span><span style="color:#998;font-style:italic"></span>      <span style="color:#998;font-style:italic">// Chdir has no effect on the parent if run in the child.
</span><span style="color:#998;font-style:italic"></span>      buf[strlen(buf) <span style="color:#000;font-weight:bold">-</span> <span style="color:#099">1</span>] <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; <span style="color:#998;font-style:italic">// chop \n
</span><span style="color:#998;font-style:italic"></span>      <span style="color:#000;font-weight:bold">if</span> (chdir(buf <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">3</span>) <span style="color:#000;font-weight:bold">&lt;</span> <span style="color:#099">0</span>)
        fprintf(stderr, <span style="color:#d14">&#34;cannot cd %s</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>, buf <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">3</span>);
      <span style="color:#000;font-weight:bold">continue</span>;
    }
    <span style="color:#000;font-weight:bold">if</span> (fork1() <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>)
      runcmd(parsecmd(buf));
    wait(<span style="color:#000;font-weight:bold">&amp;</span>r);
  }
  exit(<span style="color:#099">0</span>);
}
</code></pre></div><p><code>main</code> å‡½æ•°å¾ªç¯è°ƒç”¨ <code>getcmd</code>ä» console è¯»å–å‘½ä»¤ï¼Œå¯¹ <code>cd </code>å‘½ä»¤åšäº†ç‰¹åˆ«å¤„ç†ã€‚ä¹‹å<code>fork</code>åˆ›å»ºå­è¿›ç¨‹ï¼Œè°ƒç”¨<code>parsecmd</code>è§£æå‘½ä»¤ï¼Œå†è°ƒç”¨<code>runcmd</code>æ‰§è¡Œå¾—åˆ°çš„å‘½ä»¤ã€‚æœ€åè°ƒç”¨<code>wait</code>ç­‰å¾…å­è¿›ç¨‹ç»“æŸã€‚<code>main</code> çš„åŸºæœ¬æµç¨‹å°±è¿™æ ·ã€‚</p>
<p><code>parsecmd</code>é€’å½’è°ƒç”¨ä¸€ç³»åˆ—çš„è§£æå‡½æ•°ï¼Œå…ˆè§£æä¼˜å…ˆçº§é«˜çš„ï¼ˆ&lt;ï¼Œ&gt;å’Œ|ï¼‰ã€‚cmd åˆ†ä¸ºä¸‰ç±»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#000;font-weight:bold">struct</span> execcmd {
  <span style="color:#458;font-weight:bold">int</span> type;            <span style="color:#998;font-style:italic">// &#39; &#39;
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>argv[MAXARGS]; <span style="color:#998;font-style:italic">// arguments to the command to be exec-ed
</span><span style="color:#998;font-style:italic"></span>};

<span style="color:#000;font-weight:bold">struct</span> redircmd {
  <span style="color:#458;font-weight:bold">int</span> type;        <span style="color:#998;font-style:italic">// &lt; or &gt;
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span>cmd; <span style="color:#998;font-style:italic">// the command to be run (e.g., an execcmd)
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>file;      <span style="color:#998;font-style:italic">// the input/output file
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#458;font-weight:bold">int</span> flags;       <span style="color:#998;font-style:italic">// flags for open() indicating read or write
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#458;font-weight:bold">int</span> fd;          <span style="color:#998;font-style:italic">// the file descriptor number to use for the file
</span><span style="color:#998;font-style:italic"></span>};

<span style="color:#000;font-weight:bold">struct</span> pipecmd {
  <span style="color:#458;font-weight:bold">int</span> type;          <span style="color:#998;font-style:italic">// |
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span>left;  <span style="color:#998;font-style:italic">// left side of pipe
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span>right; <span style="color:#998;font-style:italic">// right side of pipe
</span><span style="color:#998;font-style:italic"></span>};
</code></pre></div><p><code>runcmd</code>æ ¹æ® cmd çš„ç±»å‹è¿›è¡Œåˆ†æ”¯å¤„ç†ï¼Œéœ€è¦å»å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½ä¹Ÿåœ¨è¿™ä¸ªå‡½æ•°ä¸­ã€‚</p>
<h2 id="system-interface">System interface</h2>
<p>å¹³æ—¶å¯¹shellçš„å‘½ä»¤æ‰§è¡Œä¹ ä»¥ä¸ºå¸¸ï¼Œå´ä¸æ›¾æƒ³èƒŒåçš„å®ç°ã€‚</p>
<p>åœ¨äº†è§£shellçš„å·¥ä½œåŸç†ä¹‹å‰ï¼Œéœ€è¦å¯¹å‡ ä¸ª<code>system call</code>æœ‰æ‰€äº†è§£ï¼šforkï¼Œexecã€‚</p>
<blockquote>
<p>Fork: creates a new process(child process), with exactly the same memory contents as the parent.</p>
<p>Exec: replaces the calling process&rsquo;s memory but preserves its file table.</p>
</blockquote>
<p>è¿˜æœ‰<code>file descriptor</code> ï¼Œå¦‚æœä½ å†™è¿‡ socket çš„ä»£ç ï¼Œåº”è¯¥å¯¹è¿™ä¸ªè¯ä¸é™Œç”Ÿã€‚</p>
<blockquote>
<p>File descriptor: a small integer representing a kernel-managed object that a process may read from or write to.</p>
</blockquote>
<p>å¯ä»¥ç†è§£ä¸º<code>File descriptor</code>æ˜¯å¯¹è¾“å…¥è¾“å‡ºçš„æŠ½è±¡ï¼Œè°ƒç”¨çš„è¿›ç¨‹æ— éœ€çŸ¥é“æ˜¯ä»ç»ˆç«¯ï¼Œæ–‡ä»¶è¿˜æ˜¯ pipe è¾“å…¥æˆ–è¾“å‡ºçš„ã€‚</p>
<h2 id="è¿è¡ŒåŸºæœ¬çš„å‘½ä»¤">è¿è¡ŒåŸºæœ¬çš„å‘½ä»¤</h2>
<p>å…³é”®çš„ä¸€æ­¥æ˜¯åœ¨è¿™é‡Œè°ƒç”¨<code>execv</code>æ‰§è¡Œå‘½ä»¤ï¼Œæ‰€è°“çš„â€œæ‰§è¡Œå‘½ä»¤â€å°±æ˜¯è¿è¡Œå‘½ä»¤æ‰€æŒ‡å‘çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™ä¸ªè¿›ç¨‹çš„å†…å­˜ä¼šè¢«æ”¹å˜ï¼Œä½†æ˜¯å®ƒçš„<code>file table</code>ä¸ä¼šå˜ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½åœ¨ä¸»è¿›ç¨‹ç›´æ¥è¿è¡Œå‘½ä»¤ï¼Œéœ€è¦<code>fork</code>ï¼Œå¯ä»¥å‘ç°åœ¨<code>main</code>å‡½æ•°ä¸­å·²ç»å¸®æˆ‘ä»¬åšäº†ã€‚æ‰€ä»¥æœ€ç®€å•è§‰å¾—å®ç°å°±æ˜¯è¿™æ ·ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">execv(ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>], ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv);
</code></pre></div><p>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‘½ä»¤æ‰€åœ¨çš„æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚æ¯”å¦‚è°ƒç”¨<code>ls</code>æ—¶ï¼Œéœ€è¦è¾“å…¥<code>/bin/ls</code>ã€‚æ¯æ¬¡éƒ½è¿™æ ·è¾“å…¥å¾ˆéº»çƒ¦ï¼Œè€Œä¸”ä¸ä¸€å®šæ¯ä¸ªå‘½ä»¤éƒ½åœ¨<code>/bin</code> ä¸‹é¢ã€‚é‚£ä¹ˆæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ shell æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p><code>PATH</code></p>
<h3 id="æ”¹è¿›">æ”¹è¿›</h3>
<p>ä½¿ç”¨<code>getenv(&quot;PATH&quot;)</code>å¯ä»¥å¾—åˆ°<code>PATH</code>ï¼Œå¯¹å…¶è¿›è¡Œåˆ†å‰²å­˜åœ¨æ•°ç»„ä¸­ï¼Œéå†æ•°ç»„ï¼ŒæŠŠè·¯å¾„å’Œå‘½ä»¤åè¿›è¡Œç»„åˆï¼Œå¦‚æœé‚£ä¸ªè·¯å¾„ä¸‹å­˜åœ¨é‚£ä¸ªå‘½ä»¤ï¼Œæ‰§è¡Œã€‚</p>
<p>æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šå¦‚ä½•åˆ†å‰²ï¼Ÿå¦‚ä½•æ£€æµ‹å¯ä»¥æ‰§è¡Œï¼Ÿ</p>
<p>ä¸¤ä¸ªé—®é¢˜çš„ç­”æ¡ˆåˆ†è˜–å¯¹åº”ä¸¤ä¸ªå‡½æ•°ï¼š<code>strtok_r</code>ï¼Œ<code>access</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#458;font-weight:bold">int</span> <span style="color:#900;font-weight:bold">access</span>(<span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>pathname, <span style="color:#458;font-weight:bold">int</span> mode);
</code></pre></div><p>mode å¯ä»¥æ˜¯<code>F_OK</code>ï¼Œ<code>R_OK</code>ï¼Œ<code>W_OK</code>ï¼Œ<code>X_OK</code>ï¼Œåˆ†åˆ«æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå½“å‰è¿›ç¨‹æ˜¯å¦æœ‰æƒé™è¯»ï¼Œå†™ã€‚æ‰§è¡Œè¯¥æ–‡ä»¶ã€‚mode ä¹Ÿå¯ä»¥æ˜¯å®ƒä»¬çš„æŒ‰ä½æˆ–ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è°ƒç”¨<code>acess(abs_path, F_OK | X_OK)</code> æ¥æ£€æŸ¥è¯¥è·¯å¾„ä¸‹æ˜¯å¦å¯ä»¥æ‰§è¡Œã€‚</p>
<p>æœ€ç»ˆæ”¹è¿›çš„ç‰ˆæœ¬ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">  <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39; &#39;</span><span style="color:#000;font-weight:bold">:</span>
    ecmd <span style="color:#000;font-weight:bold">=</span> (<span style="color:#000;font-weight:bold">struct</span> execcmd <span style="color:#000;font-weight:bold">*</span>)cmd;
    <span style="color:#000;font-weight:bold">if</span> (ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>] <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>)
      _exit(<span style="color:#099">0</span>);

    <span style="color:#000;font-weight:bold">if</span> (access(ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>], F_OK) <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>) { <span style="color:#998;font-style:italic">// check current dir
</span><span style="color:#998;font-style:italic"></span>      execv(ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>], ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv);
    } <span style="color:#000;font-weight:bold">else</span> {
      <span style="color:#000;font-weight:bold">const</span> <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>path <span style="color:#000;font-weight:bold">=</span> ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>];
      <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>str1, <span style="color:#000;font-weight:bold">*</span>token, <span style="color:#000;font-weight:bold">*</span>saveptr1;
      <span style="color:#458;font-weight:bold">int</span> i;
      <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>env_path <span style="color:#000;font-weight:bold">=</span> getenv(<span style="color:#d14">&#34;PATH&#34;</span>);
      <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>env_paths[<span style="color:#099">100</span>];
      <span style="color:#000;font-weight:bold">for</span> (i <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>, str1 <span style="color:#000;font-weight:bold">=</span> env_path;; i<span style="color:#000;font-weight:bold">++</span>, str1 <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">NULL</span>) {
        token <span style="color:#000;font-weight:bold">=</span> strtok_r(str1, <span style="color:#d14">&#34;:&#34;</span>, <span style="color:#000;font-weight:bold">&amp;</span>saveptr1);
        <span style="color:#000;font-weight:bold">if</span> (token <span style="color:#000;font-weight:bold">==</span> <span style="color:#0086b3">NULL</span>)
          <span style="color:#000;font-weight:bold">break</span>;
        env_paths[i] <span style="color:#000;font-weight:bold">=</span> token;
      }
      <span style="color:#458;font-weight:bold">int</span> find <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>;
      <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>abs_path; <span style="color:#998;font-style:italic">// evn_path[i] + &#34;/&#34; + path;
</span><span style="color:#998;font-style:italic"></span>      <span style="color:#458;font-weight:bold">int</span> j;
      <span style="color:#000;font-weight:bold">for</span> (j <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>; j <span style="color:#000;font-weight:bold">&lt;</span> i <span style="color:#000;font-weight:bold">&amp;&amp;</span> find <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>; j<span style="color:#000;font-weight:bold">++</span>) {
        abs_path <span style="color:#000;font-weight:bold">=</span> (<span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>)malloc(strlen(env_paths[j]) <span style="color:#000;font-weight:bold">+</span> strlen(path) <span style="color:#000;font-weight:bold">+</span> <span style="color:#099">1</span>);
        strcpy(abs_path, env_paths[j]);
        strcat(abs_path, <span style="color:#d14">&#34;/&#34;</span>);
        strcat(abs_path, path);
        <span style="color:#000;font-weight:bold">if</span> (access(abs_path, F_OK <span style="color:#000;font-weight:bold">|</span> X_OK) <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>) {
          find <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>;
          execv(abs_path, ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv);
        }
        free(abs_path);
      }
      <span style="color:#000;font-weight:bold">if</span> (<span style="color:#000;font-weight:bold">!</span>find)
        fprintf(stderr, <span style="color:#d14">&#34;Command not find: %s</span><span style="color:#d14">\n</span><span style="color:#d14">&#34;</span>, ecmd<span style="color:#000;font-weight:bold">-&gt;</span>argv[<span style="color:#099">0</span>]);
    }
    <span style="color:#000;font-weight:bold">break</span>;
</code></pre></div><h2 id="io-redirection">I/O Redirection</h2>
<p>åœ¨çœ‹æ‡‚ xv6 book çš„ç¬¬10é¡µä¹‹åå®ç°ï¼Œè¾“å…¥è¾“å‡ºé‡å®šå‘å˜å¾—å¾ˆç®€å•ï¼š<code>fork</code>ä¹‹åå…³é—­ä¹‹å‰çš„ fdï¼Œæ‰“å¼€éœ€è¦è¾“å‡ºæˆ–è¾“å‡ºçš„ fdã€‚</p>
<p>è¿™é‡Œéœ€è¦ç”¨åˆ°çš„ <code>System call</code>æ˜¯ <code>open</code> å’Œ <code>close</code>ã€‚</p>
<p>è€Œä¸”ä¹Ÿä¸éœ€è¦å¯¹ <code>&lt;</code> å’Œ <code>&gt;</code> åšåˆ†åˆ«çš„å¤„ç†ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c"><span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span><span style="color:#900;font-weight:bold">redircmd</span>(<span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span>subcmd, <span style="color:#458;font-weight:bold">char</span> <span style="color:#000;font-weight:bold">*</span>file, <span style="color:#458;font-weight:bold">int</span> type) {
  <span style="color:#000;font-weight:bold">struct</span> redircmd <span style="color:#000;font-weight:bold">*</span>cmd;

  cmd <span style="color:#000;font-weight:bold">=</span> malloc(<span style="color:#000;font-weight:bold">sizeof</span>(<span style="color:#000;font-weight:bold">*</span>cmd));
  memset(cmd, <span style="color:#099">0</span>, <span style="color:#000;font-weight:bold">sizeof</span>(<span style="color:#000;font-weight:bold">*</span>cmd));
  cmd<span style="color:#000;font-weight:bold">-&gt;</span>type <span style="color:#000;font-weight:bold">=</span> type;
  cmd<span style="color:#000;font-weight:bold">-&gt;</span>cmd <span style="color:#000;font-weight:bold">=</span> subcmd;
  cmd<span style="color:#000;font-weight:bold">-&gt;</span>file <span style="color:#000;font-weight:bold">=</span> file;
  cmd<span style="color:#000;font-weight:bold">-&gt;</span>flags <span style="color:#000;font-weight:bold">=</span> (type <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;&lt;&#39;</span>) <span style="color:#000;font-weight:bold">?</span> <span style="color:#900;font-weight:bold">O_RDONLY</span> : O_WRONLY <span style="color:#000;font-weight:bold">|</span> O_CREAT <span style="color:#000;font-weight:bold">|</span> O_TRUNC;
  cmd<span style="color:#000;font-weight:bold">-&gt;</span>fd <span style="color:#000;font-weight:bold">=</span> (type <span style="color:#000;font-weight:bold">==</span> <span style="color:#d14">&#39;&lt;&#39;</span>) <span style="color:#000;font-weight:bold">?</span> <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">:</span> <span style="color:#099">1</span>; <span style="color:#998;font-style:italic">// stdin : stdout
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">return</span> (<span style="color:#000;font-weight:bold">struct</span> cmd <span style="color:#000;font-weight:bold">*</span>)cmd;
}
</code></pre></div><p>å½“è¾“å…¥çš„å‘½ä»¤é‡å®šå‘äº†è¾“å…¥ï¼Œå¦‚ï¼š<code>cat &lt; t.sh</code>ã€‚é‚£ä¹ˆ<code>rcmd-&gt;fd</code>ä¸º0ï¼Œ<code>rcmd-&gt;flags</code>ä¸º<code>O_RDONLY</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">  <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;&gt;&#39;</span><span style="color:#000;font-weight:bold">:</span>
  <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;&lt;&#39;</span><span style="color:#000;font-weight:bold">:</span>
    rcmd <span style="color:#000;font-weight:bold">=</span> (<span style="color:#000;font-weight:bold">struct</span> redircmd <span style="color:#000;font-weight:bold">*</span>)cmd;
    errno <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">0</span>;
    close(rcmd<span style="color:#000;font-weight:bold">-&gt;</span>fd);
    rcmd<span style="color:#000;font-weight:bold">-&gt;</span>fd <span style="color:#000;font-weight:bold">=</span> open(rcmd<span style="color:#000;font-weight:bold">-&gt;</span>file, rcmd<span style="color:#000;font-weight:bold">-&gt;</span>flags, <span style="color:#099">0644</span>);<span style="color:#998;font-style:italic">//æ³¨æ„ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æƒé™
</span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">if</span> (rcmd<span style="color:#000;font-weight:bold">-&gt;</span>fd <span style="color:#000;font-weight:bold">==</span> <span style="color:#000;font-weight:bold">-</span><span style="color:#099">1</span>) {
      fprintf(stderr, <span style="color:#d14">&#34;Error: %s&#34;</span>, strerror(errno));
    }
    runcmd(rcmd<span style="color:#000;font-weight:bold">-&gt;</span>cmd);
    <span style="color:#000;font-weight:bold">break</span>;
</code></pre></div><p>è°ƒç”¨<code>close(rcmd-&gt;fd)</code>ä¼šå…³é—­æ ‡å‡†è¾“å…¥ï¼ˆ0ï¼‰ï¼Œæ­¤æ—¶æœ€å°å¯ç”¨çš„fdå˜ä¸º0,ã€‚æ¥ä¸‹æ¥è°ƒç”¨<code>open</code>æ‰“å¼€<code>t.sh</code>æ–‡ä»¶ï¼Œå®ƒçš„fdä¸º0ã€‚è¿™æ ·ä¸€æ¥è¿™ä¸ªå­è¿›ç¨‹çš„è¾“å…¥å°±é‡å®šå‘ä¸ºæ–‡ä»¶äº†ã€‚</p>
<h2 id="pipe">Pipe</h2>
<p>æ¥ä¸‹æ¥æ—¶ç®¡é“çš„å®ç°ï¼Œä¹Ÿæ˜¯éœ€è¦è°ƒç”¨ System callï¼š<code>pipe</code> å’Œ <code>dup</code>ï¼Œåˆ›å»ºç”¨äºè¿›ç¨‹é€šä¿¡çš„ç®¡é“ã€‚</p>
<blockquote>
<p>pipe()  creates  a pipe, a unidirectional data channel that can be used for interprocess</p>
<p>â€‹       communication.  The array pipefd is used to return two file  descriptors  referâ€
â€‹       ring  to  the  ends  of  the  pipe.   pipefd[0]  refers  to the read end of the pipe.
â€‹       pipefd[1] refers to the write end of the pipe.  Data written to the write end of  the
â€‹       pipe  is  buffered by the kernel until it is read from the read end of the pipe.</p>
<p>The  dup() system call creates a copy of the file descriptor oldfd, using the lowest-
â€‹       numbered unused file descriptor for the new descriptor.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">  <span style="color:#998;font-style:italic">//...
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#458;font-weight:bold">int</span> p[<span style="color:#099">2</span>], r;
  <span style="color:#998;font-style:italic">//...
</span><span style="color:#998;font-style:italic"></span>  <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;|&#39;</span><span style="color:#000;font-weight:bold">:</span>
    pcmd <span style="color:#000;font-weight:bold">=</span> (<span style="color:#000;font-weight:bold">struct</span> pipecmd <span style="color:#000;font-weight:bold">*</span>)cmd;
    pipe(p);
    <span style="color:#000;font-weight:bold">if</span> (fork1() <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>) {
      close(<span style="color:#099">1</span>);
      dup(p[<span style="color:#099">1</span>]); <span style="color:#998;font-style:italic">// use 1, write left cmd&#39;s output to p[1];
</span><span style="color:#998;font-style:italic"></span>      close(p[<span style="color:#099">0</span>]);
      close(p[<span style="color:#099">1</span>]);
      runcmd(pcmd<span style="color:#000;font-weight:bold">-&gt;</span>left);
    } <span style="color:#000;font-weight:bold">else</span>{
      close(<span style="color:#099">0</span>);
      dup(p[<span style="color:#099">0</span>]); <span style="color:#998;font-style:italic">// read right cmd&#39;s input from p[0]
</span><span style="color:#998;font-style:italic"></span>      close(p[<span style="color:#099">0</span>]);
      close(p[<span style="color:#099">1</span>]);
      runcmd(pcmd<span style="color:#000;font-weight:bold">-&gt;</span>right);
    }
    <span style="color:#998;font-style:italic">/**
</span><span style="color:#998;font-style:italic">     * The wait() system call suspends execution of the calling
</span><span style="color:#998;font-style:italic">     * process  until one  of its children terminates.  The call wait(&amp;wstatus)
</span><span style="color:#998;font-style:italic">     * is equivalent to: waitpid(-1, &amp;wstatus, 0);
</span><span style="color:#998;font-style:italic">     */</span>
    wait(<span style="color:#000;font-weight:bold">&amp;</span>r);
    <span style="color:#000;font-weight:bold">break</span>;
</code></pre></div><p>é¦–å…ˆåœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œ<code>|</code>çš„å·¦ç«¯å‘½ä»¤ï¼Œå†™å…¥p[1]ã€‚çˆ¶è¿›ç¨‹ä»ä¸­p[0]è¯»å…¥ï¼Œæ‰§è¡Œå³ç«¯å‘½ä»¤ã€‚æœ€ç»ˆå·¦ç«¯å‘½ä»¤çš„è¾“å‡ºé€šè¿‡ç®¡é“è¿æ¥åˆ°äº†å³ç«¯å‘½ä»¤çš„è¾“å…¥ã€‚</p>
<p><del>è¿™ç§æ–¹æ³•ï¼Œç»æˆ‘æµ‹è¯•æœ‰æ—¶ä¼šå‡ºç°å¤šæ‰“å°äº†ä¸€ä¸ªâ€œ6.828$â€æç¤ºç¬¦ã€‚</del>
åœ¨ mit çš„è®²ä¹‰é‡Œå‘ç°äº†<code>what if sh didn't fork for pcmd-&gt;right? [try it] would user-visible behavior change? sleep 10 | echo hi</code>ï¼Œè¿™æ ·åšçš„ç»“æœå°±æ˜¯æ‰“å°äº†<code>hi</code>ï¼Œ shell çœ‹ä¸Šå»å´æ²¡æœ‰<code>sleep 10</code>ã€‚æ‰€ä»¥è¿™ç§å®ç°æ˜¯é”™è¯¯çš„ã€‚</p>
<p>æ‰€ä»¥ï¼Œçœ‹ xv6 çš„å®ç°ï¼š</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c" data-lang="c">  <span style="color:#000;font-weight:bold">case</span> <span style="color:#d14">&#39;|&#39;</span><span style="color:#000;font-weight:bold">:</span>
    pcmd <span style="color:#000;font-weight:bold">=</span> (<span style="color:#000;font-weight:bold">struct</span> pipecmd <span style="color:#000;font-weight:bold">*</span>)cmd;
    pipe(p);
    <span style="color:#000;font-weight:bold">if</span> (fork1() <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>) {
      close(<span style="color:#099">1</span>);
      dup(p[<span style="color:#099">1</span>]); <span style="color:#998;font-style:italic">// write left cmd&#39;s output to p[1];
</span><span style="color:#998;font-style:italic"></span>      close(p[<span style="color:#099">0</span>]);
      close(p[<span style="color:#099">1</span>]);
      runcmd(pcmd<span style="color:#000;font-weight:bold">-&gt;</span>left);
    }
    <span style="color:#000;font-weight:bold">if</span> (fork1() <span style="color:#000;font-weight:bold">==</span> <span style="color:#099">0</span>) {
      close(<span style="color:#099">0</span>);
      dup(p[<span style="color:#099">0</span>]); <span style="color:#998;font-style:italic">// read right cmd&#39;s input from p[0]
</span><span style="color:#998;font-style:italic"></span>      close(p[<span style="color:#099">0</span>]);
      close(p[<span style="color:#099">1</span>]);
      runcmd(pcmd<span style="color:#000;font-weight:bold">-&gt;</span>right);
    }
    close(p[<span style="color:#099">0</span>]);
    close(p[<span style="color:#099">1</span>]);
    wait(<span style="color:#000;font-weight:bold">&amp;</span>r);
    wait(<span style="color:#000;font-weight:bold">&amp;</span>r);
    <span style="color:#000;font-weight:bold">break</span>;
</code></pre></div><p><code>fork</code> äº†ä¸¤æ¬¡ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªå­è¿›ç¨‹ï¼Œä½¿ç”¨pipeç®¡ç†å®ƒä»¬ä¹‹å‰çš„é€šä¿¡ï¼Œæœ€åä¹Ÿ<code>wait</code>ä¸¤æ¬¡ï¼Œç­‰å¾…ä¸¤ä¸ªå­è¿›ç¨‹éƒ½ç»“æŸï¼Œå½“ç„¶è¿™é‡Œå¯ä»¥é€’å½’çš„åˆ›å»ºå¤šä¸ªå­è¿›ç¨‹ã€‚ä½¿ç”¨è¿™ç§æ–¹ä¾¿åˆ™ä¸ä¼šå‡ºç°å¤šæ‰“ä¸€ä¸ªæç¤ºç¬¦çš„æƒ…å†µã€‚ï¼ˆä¸ºä»€ä¹ˆæˆ‘ä¹Ÿä¸çŸ¥é“ å•Š-.-ï¼‰</p>
<p>æ‰§è¡Œ<code>a.out &lt; t.sh</code>ï¼Œ<code>a.out</code>æ˜¯shellè‡ªå·±çš„æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>
<a data-fancybox="gallery" href="/images/6.828-hw2-shell.png">
  <img class="mx-auto" alt="rsh" src="/images/6.828-hw2-shell.png" />
</a>
</p>
        </div>

        


        


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='https://leer.moe/tags/os'>OS</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "LeeReindeer/LeeReindeer.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='//www.google.com/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://leer.moe/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>

    <section class="widget">
        <h3 class="widget-title">æœ€è¿‘æ–‡ç« </h3>
<ul class="widget-list">
    
    <li>
        <a href="https://leer.moe/post/newsletter2/" title="Newsletter 002.ã€Œè™å¹´å¿«ä¹ã€">Newsletter 002.ã€Œè™å¹´å¿«ä¹ã€</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/newsletter1/" title="Newsletter 001.ã€Œæ¸©æ•…çŸ¥æ–°ã€">Newsletter 001.ã€Œæ¸©æ•…çŸ¥æ–°ã€</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/byte-pingan-hi-alipay/" title="å†è§å¹³å®‰ï¼Œä½ å¥½æ”¯ä»˜å®">å†è§å¹³å®‰ï¼Œä½ å¥½æ”¯ä»˜å®</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/pattern-of-distributed-system-1-consistent-core/" title="åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼-åˆ†å¸ƒå¼å…±è¯†æ ¸å¿ƒ">åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼-åˆ†å¸ƒå¼å…±è¯†æ ¸å¿ƒ</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/intro-macos/" title="macOS å…¥é—¨ ğŸ˜">macOS å…¥é—¨ ğŸ˜</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/pattern-of-distribeted-system-0/" title="åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼-ç»¼è¿°">åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡æ¨¡å¼-ç»¼è¿°</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/consumer_less_create_more/" title="å°‘æ¶ˆè´¹ï¼Œå¤šåˆ›é€ ï¼Œæ›´å¿«ä¹">å°‘æ¶ˆè´¹ï¼Œå¤šåˆ›é€ ï¼Œæ›´å¿«ä¹</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/plague/" title="ã€Œé¼ ç–«ã€è¯»åæ„Ÿ">ã€Œé¼ ç–«ã€è¯»åæ„Ÿ</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/doublethink/" title="ã€Œ1984ã€è¯»åæ„Ÿ">ã€Œ1984ã€è¯»åæ„Ÿ</a>
    </li>
    
    <li>
        <a href="https://leer.moe/post/6.824_mapreduce/" title="MapReduce 6.824">MapReduce 6.824</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href="/categories">åˆ†ç±»</a></h3>
<ul class="widget-list">
    
    
    
    <li><a href="https://leer.moe/categories/newsletter/">Newsletter (2)</a></li>
    
    
    <li><a href="https://leer.moe/categories/%E5%88%9B%E4%BD%9C%E9%9B%86/">åˆ›ä½œé›† (14)</a></li>
    
    
    <li><a href="https://leer.moe/categories/%E5%AE%9E%E9%AA%8C%E5%AE%A4/">å®éªŒå®¤ (11)</a></li>
    
    
    <li><a href="https://leer.moe/categories/%E7%BF%BB%E8%AF%91%E9%9B%86/">ç¿»è¯‘é›† (6)</a></li>
    
    
    <li><a href="https://leer.moe/categories/%E8%87%AA%E4%B9%A0%E5%AE%A4/">è‡ªä¹ å®¤ (36)</a></li>
    
    
    <li><a href="https://leer.moe/categories/%E9%9A%8F%E7%AC%94%E9%9B%86/">éšç¬”é›† (13)</a></li>
    
    
    
    <li><a href="#">æœªåˆ†ç±»
            (3)</a>
    </li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>æ ‡ç­¾</a></h3>








<div class="tagcloud">
    
    
    
    
    
    <a href="https://leer.moe/tags/6.824/" style="font-size:0.8rem">6.824</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/android/" style="font-size:1.4295320036582306rem">Android</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/c/" style="font-size:1.3796618766207391rem">C</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/csapp/" style="font-size:0.8rem">CSAPP</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/distributed-system/" style="font-size:0.8rem">Distributed system</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/git/" style="font-size:1.0242438242175755rem">git</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/java/" style="font-size:1.7849500560613945rem">Java</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/javafx/" style="font-size:0.8rem">JavaFX</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/java%E5%B9%B6%E5%8F%91/" style="font-size:1.2484876484351508rem">Javaå¹¶å‘</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/jvm/" style="font-size:0.8rem">JVM</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/kotlin/" style="font-size:1.0242438242175755rem">Kotlin</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/macos/" style="font-size:0.8rem">macOS</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/manjaro/" style="font-size:0.8rem">Manjaro</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/minecraft/" style="font-size:0.8rem">Minecraft</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/mybatis/" style="font-size:0.8rem">MyBatis</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/os/" style="font-size:1.3796618766207391rem">OS</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/rtos/" style="font-size:0.8rem">RTOS</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/spring/" style="font-size:1.2484876484351508rem">Spring</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/spring-boot/" style="font-size:0.8rem">Spring Boot</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/telegram/" style="font-size:0.8rem">Telegram</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/v2ray/" style="font-size:0.8rem">V2ray</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/work/" style="font-size:0.8rem">Work</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F/" style="font-size:1.0242438242175755rem">åˆ†å¸ƒå¼ç³»ç»Ÿ</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/" style="font-size:0.8rem">å¹´ç»ˆæ€»ç»“</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E5%BE%AE%E4%BF%A1/" style="font-size:1.3796618766207391rem">å¾®ä¿¡</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E6%8A%80%E5%B7%A7/" style="font-size:0.8rem">æŠ€å·§</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:1.2484876484351508rem">æ•°æ®ç»“æ„</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E7%9E%8E%E6%8A%98%E8%85%BE/" style="font-size:1.3796618766207391rem">çæŠ˜è…¾</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E7%AE%97%E6%B3%95/" style="font-size:1.2484876484351508rem">ç®—æ³•</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size:0.8rem">ç¼–è¯‘åŸç†</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E7%BF%BB%E8%AF%91/" style="font-size:1.1554180524031636rem">ç¿»è¯‘</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size:1.2484876484351508rem">è®¾è®¡æ¨¡å¼</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E8%AF%BB%E4%B9%A6/" style="font-size:1.3796618766207391rem">è¯»ä¹¦</a>
    
    
    
    
    
    <a href="https://leer.moe/tags/%E9%9A%8F%E7%AC%94/" style="font-size:1.2484876484351508rem">éšç¬”</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">å…¶å®ƒ</h3>
        <ul class="widget-list">
            <li><a href="https://leer.moe/index.xml">æ–‡ç«  RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
    <footer id="footer">
    <div class="container">
        &copy; 2022 <a href="https://leer.moe/">LeeReindeer&#39;s blog</a>.
        Powered by <a rel="nofollow noreferer noopener" href="https://gohugo.io" target="_blank">Hugo</a>
        <a href="https://github.com/LeeReindeer/maupassant-hugo" target="_blank">maupassant</a>.
        
    </div>
    <div class="container" id="showDays"></div>
</footer>
<script type="text/javascript" src='/js/sitedate.js' async=""></script>





<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>








<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "ed681cb7afd944b3befe979a9f047e05"}'></script>

</body>

</html>